# 异常控制流

[english version](https://www.programmerall.com/article/14231351292/)
[读薄 CSAPP](https://wdxtub.com/csapp/thin-csapp-5/2016/04/16/)

## 缘起

* 为何需要异常控制流？为谁服务？

* 常见的需要异常控制流介入的场景有哪些？

* 操作系统为何可以同时执行不同的程序？

* 我们已经学过哪些控制流的方式？面对哪些场景时，仍无能为力？
  keyword: “平滑”序列，系统必须对自身系统状态的变化做出反应

* 异常控制流可发生在系统的哪些层次？各自有哪些典型场景
  keyword: 操作系统 应用层 硬件层

* 与代码中常见的 `try` `catch` 所涉及的异常有联系吗？

* 存在于一个计算机系统中所有层次上的各种异常控制流
  * 异常 - 硬件与操作系统间
  * 系统调用 - ~~操作系统与应用程序间~~ 为应用程序提供到操作系统入口的异常
  * 进程与信号 - 操作系统与应用程序的交界处

### 异常

* 事件 是指？
* 事件一定与当前执行的指令有关吗
* 异常表的作用
* 异常处理程序，异常处理程序的结果有哪些类型

#### 异常处理

* 异常号
* **异常处理的流程**
* 异常处理程序运行在**内核模式**下，意味着他们对所有的系统资源都有完全的访问权限

#### 异步异常-中断（Interrupt）

* 为何中断是异步异常？异步异常的特征是？
  > Interrupt is caused by I/O Devides, which is not made by the current instruction, it is asynchronous.

* 在中断的情况下
  * 需要设置处理器的中断指针（Interrupt pin）
  * 处理完成后会返回之前控制流中的[下一条]指令
* 比较常见的中断类型

#### 同步异常

* 陷阱
* 故障
  以`Page Fault`为例解释 Fault 的机制
* 终止

### 进程

进程才是程序的真正运行实例

* 进程提供了哪些重要的抽象
  keyword: context switching, virtual memory
* 进程切换
  * 切换时需要保存哪些数据？
  * 调度模型？
  * 并发与并行
* 进程控制
  * 如何创建进程？
  * 系统调用的错误处理？
  * 终止进程
  * 父进程与子进程的关系？
    * 并发或并行？
    * 两个返回值是指？
    * 执行顺序？
* 进程图
* 如何回收子进程
  
### 信号

* 为何需要信号？僵尸进程如何回收？
* 信号是 Unix 类Unix 以及其他 POSIX 兼容的操作系统中进程间通讯的一种有限制的方式。
  当一个信号发送给一个进程，操作系统中断了进程正常的控制流程，此时任何非原子操作都将被中断。
  如果进程定义了信号的处理函数，那么它将被执行，否则就执行了默认的处理函数。
* 内核会强制要求进程对信号做出响应，有哪些操作？
* **同类的信号至多只会有一个待处理信号**

### 进程组
### 接收信号
### 阻塞信号
### 安全处理信号

## 非本地跳转 Non local Jump

